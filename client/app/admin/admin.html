<div class="container">
  <p>The delete user and user index api routes are restricted to users with the 'admin' role.</p>

  <uib-tabset active="activeUsers" justified="true">
    <uib-tab index="0" heading="Users">
      <ul class="list-group">
        <li ng-repeat="user in admin.users" class="list-group-item">
          <strong>{{user.name}}</strong><br/>
          <span class="text-muted">{{user.email}}</span>
          <a ng-click="admin.delete(user)" class="trash"><span class="glyphicon glyphicon-trash pull-right"></span></a></li>
      </ul>
    </uib-tab>
    <uib-tab index="1" heading="Matches">

      <table class="table">
        <thead>
        <tr>

          <th>poster</th>
          <th>date</th>
          <th>headline</th>
          <th>rival</th>
          <th>round</th>
        </tr>
        </thead>
        <tbody>
        <tr>

          <td><input type="text" name="poster" ng-model="admin.newMatch.poster" required="" /></td>
          <td><input type="datetime-local" name="date" ng-model="admin.newMatch.date" placeholder="yyyy-MM-dd H:mm" required="" /></td>
          <td><input type="text" name="headline" ng-model="admin.newMatch.headline" required="" /></td>
          <td><input type="text" name="rival" ng-model="admin.newMatch.rival" required="" /></td>
          <td><input type="text" name="round" ng-model="admin.newMatch.round" required="" /></td>
          <td>
            <select class="form-control" ng-model="admin.newMatch.priceSchema" ng-options="option.priceSchema.name for option in admin.priceSchemas track by option.id"></select>
          <td>
          <td>
            <button class="btn btn-primary btn-sm" ng-click="admin.createMatch(admin.newMatch, '1')" ><span class="glyphicon glyphicon-ok"></span></button>
          </td>
        </tr>

        <tr ng-repeat="match in admin.matches">
          <td>
            <input type="text" name="poster" ng-model= "match.poster" required="" />
          </td>
          <td>
            <input type="datetime-local" ng-model="match.date" placeholder="yyyy-MM-dd H:mm" required />
          </td>
          <td>
            <input type="text" name="poster" ng-model= "match.headline" required="" />
          </td>
          <td>
            <input type="text" name="poster" ng-model= "match.rival" required="" />
          </td>
          <td>
            <input type="text" name="poster" ng-model= "match.round" required="" />
          </td>
          <td>
            <select class="form-control" ng-model="match.priceSchema" ng-options="option.priceSchema.name for option in admin.priceSchemas track by option._id"></select>
          <td>
          <td>
            <button class="btn btn-primary btn-sm" ng-click="admin.editMatch(match)" ><span class="glyphicon glyphicon-pencil"></span></button>
          </td>
          <td>
            <button class="btn btn-primary btn-sm" ng-click="admin.deleteMatch(match)" ><span class="glyphicon glyphicon-remove"></span></button>
          </td>
        </tr>
        </tbody>
      </table>

      {{ admin.newMatch }}


    </uib-tab>
    <uib-tab index="2" heading="Orders">
      <form name="myForm"><br>
        <label> Выберите матч: </label>
        <select class="form-control" name="repeat" id="repeatSelect" ng-change="admin.getCountPaidOrders(admin.matchDate)" ng-model="admin.matchDate">
          <option ng-repeat="option in admin.matches" value="{{option.date}}">{{option.headline}}</option>
        </select>
      </form>
      <hr>
      <table class="table">
        <thead>
        <tr>
          <th>Match date</th>
          <th>West tribune</th>
          <th>East tribune</th>
          <th>Total price</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td ng-bind="admin.matchDate | date:'dd-MM-yyyy HH:mm:ss'">
          </td>
          <td ng-bind="admin.paidOrders.west">
          </td>
          <td ng-bind="admin.paidOrders.east">
          </td>
          <td ng-bind="admin.paidOrders.total | money">
          </td>
        </tr>
        </tbody>
      </table>
    </uib-tab>
    <uib-tab index="3" heading="Tickets">
      <form name="myForm"><br>
        <label for="code"> Введите код: </label>
        <input type="text" id="code" ng-model="code" placeholder="Enter barcode">
        <button ng-click="admin.checkTicket(code)">Check ticket</button>
        <br>
        <span ng-show="admin.message"  ng-bind="admin.message"></span>
        <span ng-show="admin.ticket.seat">Ticket valid. Seat - {{admin.ticket.seat.number}}, row - {{admin.ticket.seat.row}},
         sector - {{admin.ticket.seat.sector}}</span>
      </form>
      <button ng-click="admin.getTickets()">Load tickets</button>
      <hr>
      <table class="table">
        <thead>
        <tr>
          <th>sector</th>
          <th>row</th>
          <th>amount</th>
          <th>number</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="ticket in admin.tickets">
          <td ng-bind="ticket.seat.sector">
          </td>
          <td ng-bind="ticket.seat.row">
          </td>
          <td ng-bind="ticket.amount | money">
          </td>
          <td ng-bind="ticket.seat.number">
          </td>
        </tr>
        </tbody>
      </table>
    </uib-tab>
    <uib-tab index="4" heading="Price Schema">
      <price-schema></price-schema>
    </uib-tab>
  </uib-tabset>

</div>
